/**
 * RiojaSlider 0.1v
 *
 * Copyright 2016, Gerard Rodes https://github.com/GerardRodes
 *
 * Released under the MIT license - http://opensource.org/licenses/MIT
 */
 
!function(a){var b={wrapper:"slider-wrapper",viewport:"viewport",slider:"slider",slide:"slide",controls:"controls",prev:"prev",next:"next"},c={height:"100%",width:"100%",startSlide:0,slideSpeed:1e3,slideEasing:"swing",prevContent:"Prev",nextContent:"Next",infiniteLoop:!1,multipleClicks:!1,sliderMode:"horizontal",controls:!0,auto:!1,autoPause:4e3,stopAutoOnControl:!0,stopAutoTime:2e3};a.fn.extend({riojaSlider:function(b){var e=a.extend({},c,b);if(this.length>1){var f=[];return this.each(function(){f.push(d(this,e))}),f}return d(this,e)}});var d=function(a,b){var c=new e(a,b);return c.init(),c},e=function(c,d){var e=this;this.state=null,this.elements={slider:{dom:a(c),custom:null},slides:{dom:a(c).children(),total:a(c).children().length,actual:{index:d.startSlide,element:null},custom:[]}},this.customElements={name:"wrapper",element:null,children:[{name:"viewport",element:null,css:{overflow:"hidden",position:"relative",width:d.width,height:d.height},children:[{name:"slider",css:{margin:0,padding:0,listStyle:"none"},element:this.elements.slider.dom,children:a.makeArray(this.elements.slides.dom.map(function(b,c){return{element:a(c),name:"slide",index:b,css:{position:"absolute",top:0,left:"100%"},attributes:{"data-index":b}}}))}]},{name:"controls",condition:d.controls,element:null,children:[{name:"prev",content:d.prevContent},{name:"next",content:d.nextContent}]}]},this.sliderMode={horizontal:function(b,c,f,g,h,i,j){var l,k={duration:d.slideSpeed,easing:d.slideEasing,queue:!1};e.state="inTransition",a.each(c,function(a,c){l=void 0,a+1==j?k.done=e.setStateReady:d.infiniteLoop&&a==g?k.done=e.setStateReady:k.done=void 0,d.infiniteLoop?"Next"==i?c.index==g?(b.element.css({left:f}),l=0):c.index==h?l=-f:c.element.css({left:-f}):"Prev"==i&&(c.index==g?(b.element.css({left:-f}),l=0):c.index==h?l=f:c.element.css({left:f})):l=(c.index-g)*f,void 0!=l&&c.element.animate({left:l},k)}),e.elements.slides.actual.index=g,e.elements.slides.actual.element=b}},this.interval={lastMove:"Next"},this.init=function(){this.setStateReady(),this.buildCustomElement(),this.elements.viewport.width=this.elements.viewport.custom.element.width(),this.elements.viewport.height=this.elements.viewport.custom.element.height(),a.each(e.elements.slides.custom,function(a,b){e.renderSlide(b)}),this.showSlide(d.startSlide),d.controls&&this.bindControls(),e.setStateReady(),d.auto&&this.autoSlider()},this.setStateReady=function(){e.state="ready"},this.stateReady=function(){return"ready"==e.state},this.autoSlider=function(){setTimeout(function(){e.showNextSlideOnFiniteSlider(),e.interval.reference=setInterval(e.showNextSlideOnFiniteSlider,d.autoPause+d.slideSpeed)},d.autoPause)},this.pauseAuto=function(){clearInterval(e.interval.reference),void 0!=e.interval.pause&&clearTimeout(e.interval.pause),e.interval.pause=setTimeout(e.autoSlider,d.stopAutoTime)},this.bindControls=function(){this.elements.prev.custom.element.on("click",function(){d.stopAutoOnControl&&d.auto&&e.pauseAuto(),d.multipleClicks?e.showPrevSlide():e.stateReady()&&e.showPrevSlide()}),this.elements.next.custom.element.on("click",function(){d.stopAutoOnControl&&d.auto&&e.pauseAuto(),d.multipleClicks?e.showNextSlide():e.stateReady()&&e.showNextSlide()})},this.showNextSlideOnFiniteSlider=function(){d.infiniteLoop?e.showNextSlide():"Next"==e.interval.lastMove?e.showNextSlide()?e.interval.lastMove="Next":(e.showPrevSlide(),e.interval.lastMove="Prev"):"Prev"==e.interval.lastMove&&(e.showPrevSlide()?e.interval.lastMove="Prev":(e.showNextSlide(),e.interval.lastMove="Next"))},this.showPrevSlide=function(){var b,a=e.elements.slides.actual.index;if(d.infiniteLoop)b=a>0?a-1:e.elements.slides.total-1,e.showSlide(b,"Prev");else{if(!(a>0))return!1;e.showSlide(a-1,"Prev")}return!0},this.showNextSlide=function(){var b,a=e.elements.slides.actual.index;if(d.infiniteLoop)b=a<e.elements.slides.total-1?a+1:0,e.showSlide(b,"Next");else{if(!(a<e.elements.slides.total-1))return!1;e.showSlide(a+1,"Next")}return!0},this.renderSlide=function(a){var b="number"==typeof a?a:a.index,c="number"==typeof a?e.getSlide(a):a;c.element.css({left:e.elements.viewport.width*b})},this.showSlide=function(a,b){var c="number"==typeof a?a:a.index,f="number"==typeof a?e.getSlide(a):a,g=e.elements.slides.custom,h=e.elements.slides.total,i=e.elements.viewport.width,j=e.elements.slides.actual.index;e.sliderMode[d.sliderMode](f,g,i,c,j,b,h)},this.getSlide=function(b){return a.grep(this.elements.slides.custom,function(a){return a.index==b})[0]},this.appendSlide=function(b){var c=e.elements.slides.total,d=e.elements.slides.actual.index,f=e.elements.viewport.width,g=e.buildCustomElement({element:a(document.createElement("LI")).html(b),name:"slide",index:c,css:{position:"absolute",top:0,left:(c-d)*f},attributes:{"data-index":c}});e.elements.slider.custom.element.append(g.element),e.elements.slider.custom.children.push(g.element),e.elements.slides.dom=e.elements.slider.custom.element.children(),e.elements.slides.total++},this.prependSlide=function(b){var c=e.elements.slides.actual.index,d=e.elements.viewport.width,f=e.buildCustomElement({element:a(document.createElement("LI")).html(b),name:"slide",index:0,css:{position:"absolute",top:0,left:c*d*-1-d},attributes:{"data-index":0}});e.elements.slider.custom.element.prepend(f.element),e.elements.slider.custom.children.unshift(f.element),a.each(e.elements.slides.custom,function(a,b){e.elements.slider.custom.children[a].index=a,e.elements.slides.custom[a].index=a,e.elements.slides.custom[a].attributes["data-index"]=a,e.elements.slides.custom[a].element.attr("data-index",a)}),e.elements.slides.dom=e.elements.slider.custom.element.children(),e.elements.slides.actual.index+=1,e.elements.slides.total+=1},this.buildCustomElement=function(c){var d=void 0===c?this.customElements:c,f=void 0===c;return!(void 0!=d.condition&&!d.condition)&&(null!=d.element&&void 0!=d.element||(d.element=a(document.createElement("DIV")),f&&e.elements.slider.dom.replaceWith(d.element)),d.element.addClass(b[d.name]),void 0!=d.attributes&&a.each(d.attributes,function(b,c){a(d.element).attr(b,c)}),void 0!=d.css&&a(d.element).css(d.css),void 0!=d.content&&a(d.element).html(d.content),"slide"==d.name?(0==d.index&&e.elements.slides.custom.length>0?e.elements.slides.custom.unshift(d):e.elements.slides.custom.push(d),a(d.element).css({minWidth:e.elements.viewport.custom.css.width,minHeight:e.elements.viewport.custom.css.heigh})):(void 0===e.elements[d.name]&&(e.elements[d.name]={}),e.elements[d.name].custom=d),"children"in d&&a.each(d.children,function(a,b){d.element.append(e.buildCustomElement(b).element)}),d)}}}(jQuery);